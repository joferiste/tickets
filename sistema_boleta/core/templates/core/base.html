{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Home{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'core/css/styles.css' %}">  
    {% block extra_css %}{% endblock %}  
    <script src="{% static 'core/js/main.js' %}" defer></script> 
</head>
<body>
    {# Redirigir si no esta autenticado #}
    {% if not user.is_authenticated %}
        <script> window.location.href = "{% url 'login' %}";</script>
    {% endif %}
    <!-- Header -->
    <header class="header">
        <div class="page-title">{% block page_title %}Dashboard{% endblock %}</div>
        <div class="admin-info">
            <!-- Notificaciones -->
 

            <!-- Usuario -->
            <a href="{% url 'logout' %}" class="user-status">
                <span class="user-circle"></span>
                <span class="username">{{ user.username }}</span>
                <span class="logout-text"> Cerrar SesiÃ³n </span>
            </a>
        </div>
    </header>

    <!-- Mensajes Flash -->
    {% if messages %}
        <div class="flash-container"> 
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                    <button class="alert-close" type="button" aria-label="Cerrar">&times;</button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Contenedor Principal -->
    <div class="main-container">    
        {% load static actives %}
        
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="{% url 'home' %}" class="sidebar-link {% active 'home' %}">
                    <span class="sidebar-icon">ğŸ“Š</span>
                    <span>Dashboard</span>
                </a>
                
                <a href="{% url 'administracion:boletas_sandbox' %}" class="sidebar-link {% active 'boletas_sandbox' %}">
                    <span class="sidebar-icon">âš™ï¸</span>
                    <span>AdministraciÃ³n</span>
                </a>

                <a href="{% url 'gestion_crud' %}" class="sidebar-link {% active 'gestion_crud' %}">
                    <span class="sidebar-icon">ğŸ“‹</span>
                    <span>GestiÃ³n CRUD</span>
                </a>
                
                <!-- Submenu Asignaciones -->
                <div class="submenu-container">
                    <button class="submenu-toggle" type="button" data-submenu="asignaciones-submenu">
                        <span class="sidebar-icon">ğŸ”—</span>
                        <span>Asignaciones</span>
                        <span class="submenu-arrow">â–¸</span>
                    </button>
                    <div class="submenu" data-submenu-id="asignaciones-submenu">
                        <a href="{% url 'usuarios:usuario_negocio' %}" class="submenu-link {% active 'usuario_negocio' %}">
                            Usuarios a Negocios
                        </a>
                        <a href="{% url 'negocios:negocio_local' %}" class="submenu-link {% active 'negocio_local' %}">
                            Negocios a Locales
                        </a>
                        <a href="{% url 'locales:orden_local' %}" class="submenu-link {% active 'orden_local' %}">
                            Orden de Locales
                        </a>
                    </div>
                </div>  
                
                <a href="{% url 'historiales:dashboard_metricas' %}" class="sidebar-link {% active 'dashboard_metricas' %}">
                    <span class="sidebar-icon">ğŸ“Š</span>
                    <span>AnÃ¡lisis y mÃ©tricas</span>
                </a>

                <a href="{% url 'reportes:consolidado_ingresos' %}" class="sidebar-link {% active 'consolidado_ingresos' %}">
                    <span class="sidebar-icon">ğŸ“ˆ</span>
                    <span>Reportes</span>
                </a>

                <a href="{% url 'configuracion:configuracion_sistema' %}" class="sidebar-link {% active 'configuracion_sistema' %}">
                    <span class="sidebar-icon">ğŸ”§</span>
                    <span>ConfiguraciÃ³n</span>
                </a>


            </nav>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-container">
            {% block content %}         
            {% endblock %}  
        </main>  
    </div>

    {% block extra_scripts %}{% endblock %}
</body>
</html>